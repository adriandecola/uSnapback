<!DOCTYPE html>
<!--
  File:             results.html
  Description:      Main entry point for the website
  Author:           Adrian deCola
  Relative Path:    uSnapback/src/results.html
  Linked files:		../styles/styles.css, ../js/pages/results.js
-->
<html lang="en">
<head>
    <!-- 
        Specifies the character encoding for the HTML document
        UTF-8 is a universal character encoding that supports all 
        written languages, symbols, and emojis 
    -->
    <meta charset="UTF-8">

    <!-- 
        Sets width of viewport to device's screen width 
        initial-scale=1.0 makes sure the browser doesn't start 
        zoomed in by default 
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- 
        Sets compatibility mode for older versions of Internet Explorer. 
        The X-UA-Compatible tag tells Internet Explorer (up to version 11) 
        which rendering engine to use for better compatibility and functionality. 
        This tag is now mostly unnecessary because modern browsers no longer 
        require it, but it remains useful for legacy support. 
    -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- The title of the document, shown in the browser tab -->
    <title>uSnapback</title>

    <!-- Brief description of the webpage for search engines -->
    <meta name="description" content="An application to design a snapback primer for single base variant asymmetrical PCR." />

    <!--
        Open Graph metadata for sharing content on social platforms. 
        These tags control the webpage appearence.
    -->
    <!-- The title of the content, shown as the heading in the preview card -->
    <meta property="og:title" content="uSnapback"/>
    <!-- The image displayed in the preview card -->
	<meta property="og:image" content=""/>
    <!-- Canonical URL of the webpage, which helps with SEO -->
	<meta property="og:url" content="https://dna-utah.com/uSnapback"/>
    <!-- The name of the website where the content is hosted -->
	<meta property="og:site_name" content="DNA Utah"/>
    <!-- A short description of the content, shown in the preview -->
	<meta property="og:description" content="An application to design a snapback primer for single base variant asymmetrical PCR."/>

    <!-- Link to CSS File -->
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="../styles/pages/results.css">
</head>

<body>
	<!-- Header -->
	<header class="app-header">
		<div class="title">uSnapback</div>
	</header>

	<!-- Main content -->
	<main class="app-main">

        <section class="instructions">
            <p>
                The snapback primer has been calculated using all inputs you provided.
                Review the design below. If anything looks off, simply use your browser’s
                back button to tweak the inputs and re-run.
            </p>
        </section>

        <!-- results injected by JS -->
        <div id="resultBox" class="result-card" hidden>
            <div class="primer-header">
                <h2>Snapback Primer&nbsp;(5′→3′)</h2>
                <button
                    type="button"
                    class="copy-btn"
                    id="copySnapSeqBtn"
                    aria-label="Copy snapback primer to clipboard"
                >
                    <span class="copy-icon" aria-hidden="true"></span>
                </button>
            </div>

            <!-- Raw sequence for copy/paste -->
            <pre id="snapSeq" class="sequence-raw"></pre>


            <div class="primer-header">
                <h2>Limiting Primer&nbsp;(5′→3′)</h2>
                <button
                    type="button"
                    class="copy-btn"
                    id="copyLimitSeqBtn"
                    aria-label="Copy limiting primer to clipboard"
                >
                    <span class="copy-icon" aria-hidden="true"></span>
                </button>
            </div>
            <pre id="limitSeq"></pre>


            <h3 class="alt-title">Extended snapback primer</h3>
            <div
                id="stemDiagramWrapper"
                class="stem-diagram-wrapper"
                aria-label="Snapback stem (extended snapback primer)"
            >
                <div class="stem-layout">
                    <!-- static picture on the left -->
                    <img
                        src="../assets/icons/loop-icon.svg"
                        alt="Hairpin loop formed by snapback tail"
                        class="stem-loop-img"
                    />

                    <!-- existing two-row stem on the right (JS fills this) -->
                    <div id="stemDiagram" class="stem-diagram">
                        <!-- Top and bottom rows injected by JavaScript -->
                    </div>
                </div>

                <div
                    id="stemSnvLabel"
                    class="stem-snv-label"
                    aria-live="polite"
                ></div>
            </div>


            <ul style="margin-top:1rem">
                <li><strong>Tail appended to:</strong> <span id="tailSide"></span></li>
                <li><strong>SNV on tail matches:</strong> <span id="matchesWild"></span></li>
                <li><strong>Wild-type&nbsp;T<sub>m</sub>:</strong> <span id="wildTm"></span> °C</li>
                <li><strong>Variant&nbsp;T<sub>m</sub>:</strong> <span id="varTm"></span> °C</li>
            </ul>

            <!-- ΔTm table -->
            <h3 class="alt-title">Alternate Snapback ΔT<sub>m</sub> Options (based on Wittwer parameters)</h3>
            <div class="table-wrapper">
                <table class="delta-table" id="deltaTable" aria-describedby="deltaCaption">
                    <thead>
                        <tr>
                            <th scope="col">Tail on ROW Matches COL </th>
                            <th scope="col">Wild base</th>
                            <th scope="col">Variant base</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">Forward primer</th>
                            <td id="dt-fwd-wild">—</td>
                            <td id="dt-fwd-var">—</td>
                        </tr>
                        <tr>
                            <th scope="row">Reverse primer</th>
                            <td id="dt-rev-wild">—</td>
                            <td id="dt-rev-var">—</td>
                        </tr>
                    </tbody>
                    <caption id="deltaCaption">
                        ΔT<sub>m</sub> = | T<sub>m</sub>(snapback with wild allele) − T<sub>m</sub>(snapback with variant allele) | (°C)
                    </caption>
                </table>
            </div>
        </div>
        <!-- full-page loading overlay ▼▼ -->
        <div id="loadingOverlay" class="loading-overlay" hidden>
            <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
            <p>Calculating snapback&nbsp;primer…</p>
        </div>

    </main>


	<!-- Floating PREVIOUS button -->
	<button type="button" id="prevBtn" class="prev-btn">⭠ Back</button>

	<!-- Floating RESTART button -->
    <button type="button" id="restartBtn" class="restart-btn">Restart ↺</button>


	<!-- Javascript for this page -->
	<script type="module" src="../js/pages/results.js"></script>

</body>

</html>